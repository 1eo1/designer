<!--
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../../polymer/polymer.html">
<link rel="import" href="../../../neoprene/components/x-elements/x-template/x-template.html">
<link rel="import" href="../../../core-asset/core-asset.html">
<link rel="import" href="../designer-stage/designer-stage.html">

<dom-module id="designer-playground">

  <style>
    designer-playground {
      display: flex;
      box-sizing: border-box;
    }
    designer-playground > designer-stage {
      flex: 1;
      box-sizing: border-box;
    }
    designer-playground > nav {
      flex: 0 0 240px;
      z-index: 100;
    }
    designer-playground > nav > a {
      display: block;
      color: black;
      text-decoration: none;
      padding: 8px;
    }
    designer-playground > nav > a:hover {
      text-decoration: underline;
      cursor: hand;
    }
  </style>

  <core-asset id="demo-doc-1" href="demo-doc-1.html"></core-asset>
  <core-asset id="demo-doc-2" href="demo-doc-2.html"></core-asset>

  <template>
    <nav on-click="_navOnClick">
      <a data-demo="demo-doc-1">Demo 1</a>
      <a data-demo="demo-doc-2">Demo 2</a>
    </nav>
    <designer-stage id="stage"></designer-selection>
  </template>

</dom-module>

<script>

  (function(global) {

    global.DesignerPlayground = Polymer({
      is: 'designer-playground',

      created: function() {
      },

      ready: function() {
      },

      _navOnClick: function(e) {
        if (e.target.tagName == 'A') {
          var module = document.createElement('dom-module');
          var demoName = e.target.dataset.demo;
          var demoAsset = module.import('designer-playground', '#' + demoName);

          var loadDemo = (function() {
            this.$.stage.setDocument(demoAsset.content);
          }).bind(this);

          if (demoAsset.loaded) {
            loadDemo();
          } else {
            demoAsset.addEventListener('content-loaded', loadDemo);
          }
        }
      }
    });
  })(window);

</script>
